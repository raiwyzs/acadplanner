{% extends "base.html" %}

{% block head %}
    <title>Meus Eventos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style/events.css') }}">
{% endblock head %}

{% block content %}
<div class="main-content">

    <div class="header-area">
        <h1>Meus Eventos</h1>
        <a href="{{ url_for('events.events_add') }}" class="add-event-btn enhanced-btn">
            <i class="fas fa-plus"></i> Adicionar Evento
        </a>
    </div>

    {% if datas %}
    <div class="events-grid extra-margin">

        {% for data in datas %}
        <article class="event-card" role="article" aria-labelledby="ev-{{ data.id }}-title">
            <header>
                <div id="ev-{{ data.id }}-title" class="event-title">{{ data.titulo_evento }}</div>

                <div class="event-type">
                    Tipo: 
                    <strong>
                        {{ data.tipo_evento.nome }}
                    </strong>
                </div>
            </header>

            <div class="event-main">

                <!-- DATA COM COR DE ACORDO COM A RELEVÂNCIA -->
                <div class="event-date 
                    {% if data.relevancia.nivel == 'Alta' %}date-high
                    {% elif data.relevancia.nivel == 'Média' %}date-medium
                    {% else %}date-low{% endif %}
                ">
                    {{ data.data.strftime('%d/%m/%Y') }}
                </div>

                <div class="event-meta">

                    <!-- BADGE DE RELEVÂNCIA -->
                    <div class="event-relevance">
                        {% if data.relevancia.nivel == "Alta" %}
                            <span class="badge badge-high">Relevância: Alta</span>
                        {% elif data.relevancia.nivel == "Média" %}
                            <span class="badge badge-medium">Relevância: Média</span>
                        {% else %}
                            <span class="badge badge-low">Relevância: Baixa</span>
                        {% endif %}
                    </div><br>


                </div>
            </div>

            <footer class="event-buttons">
                <a href="{{ url_for('events.events_edit', event_id=data.id) }}" class="btn-edit">Editar</a>

                <form method="POST" action="{{ url_for('events.events_delete', event_id=data.id) }}" 
                      onsubmit="return confirm('Tem certeza que deseja excluir este evento?');">
                    <button type="submit" class="btn-delete">Excluir</button>
                </form>
            </footer>
        </article>
        {% endfor %}

    </div>

    {% else %}
    <div class="no-events">
        <i class="fas fa-calendar-times fa-3x"></i>
        <h3>Nenhum evento cadastrado</h3>
        <p>Comece adicionando seu primeiro evento acadêmico!</p>
        <a href="{{ url_for('events.events_add') }}" class="add-event-btn enhanced-btn">
            <i class="fas fa-plus"></i> Adicionar Primeiro Evento
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
